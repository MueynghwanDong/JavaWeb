<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link type="text/css" href="quiz-7-mashup.css" rel="stylesheet">
</head>
<body>
	<header id="top">
		<img id="text_top" src="../../images/mashup/Monster_Mashup.png" />
		<p>사진을 움직여 몬스터를 만들어보세요</p>
	</header>
	<hr>
	<div id="container">
		<img class="lightning" id="lightning1" src="../../images/mashup/lightning-01.jpg"> <img class="lightning" id="lightning2" src="../../images/mashup/lightning-02.jpg"> <img
			class="lightning" id="lightning3" src="../../images/mashup/lightning-03.jpg">
		<div id="frame">
			<div id="pic_box">
				<div id="head" class="face">
					<img src="../../images/mashup/headsstrip.jpg">
				</div>
				<div id="eye" class="face">
					<img src="../../images/mashup/eyesstrip.jpg">
				</div>
				<div id="nose" class="face">
					<img src="../../images/mashup/nosesstrip.jpg">
				</div>
				<div id="mouth" class="face">
					<img src="../../images/mashup/mouthsstrip.jpg">
				</div>
			</div>
		</div>
	</div>
</body>
<!-- 
	todo 01: 3개의 lightning 이미지가 각각 250ms 동안 fadein과 fadeout을 반복하게 한다. 
	 - lightning1은 4초마다, lightning2는 5초 마다, lightning3는 7초마다 위 동작을 반복한다.
	todo 02 : face class의 div 들을 한번씩 클릭하면 좌측으로 367 px만큼 이동하게 한다.
	 - 단 클릭 카운트가 9와 같다면 0으로 위치시키고 이를 위해 각 이미지별 클릭 카운트를 저장하기 위한 배열변수를 사용한다.
 	todo 03 : 화면 로딩 시 face class의 div 들이 각각 random 수 만큼 이동한 상태에서 시작하도록 한다.
 	 - 이를 위해 todo 02에서 작성한 click 이벤트를 random 수만큼 trigger로 호출한다.
 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
	$(document).ready(function() {
		// 번개들이 fadein과 fade out을 반복하도록 setInterval 메서드를 작성한다.
		var interval1 = window.setInterval(function() {
			$("#lightning1").fadeIn(250).fadeOut(250);
		}, 4000);
		var interval2 = window.setInterval(function() {
			$("#lightning2").fadeIn(250).fadeOut(250);
		}, 5000);
		var interval3 = window.setInterval(function() {
			$("#lightning3").fadeIn(250).fadeOut(250);
		}, 7000);
		// face의 각 요소들이 클릭된 카운트를 저장할 수 있도록 배열을 선언한다.
		var click = [ 0, 0, 0, 0 ];

		function updateClick(idx, img) {
			// idx에 저장된 값(기존 클릭 회수)을 가져와
			var prev = click[idx];
			//9회 미만이면 img를 왼쪽으로 0.5초 동안 -367px 이동시킨후 클릭 회수를 1 증가 시킨다.
			if (prev < 9) {
				$(img).animate({
					left : "-=367px"
				}, 500);
				click[idx]++;
				// 그렇지 않으면 0으로 위치시키고 클릭 회수를 0으로 초기화 한다. 
			} else {
				$(img).animate({
					left : "0px"
				}, 500);
				click[idx] = 0;
			}
		}

		// 각각의 face classe들이 클릭되었을 때 click 이벤트로 updateClick을 호출한다.
		// 이때 넘겨주는 데이터는 클릭 요소의 index와 자신
		$(".face").each(function(index, item) {
			$(item).on("click", function() {
				updateClick(index, this);
			});
		})

		// 각 요소에 할당할 random 값을 생성 한 후 요소별로 click 이벤트를 주어진 회수만큼 트리거 시킨다.
		$(".face").each(function(index, data) {
			var random = Math.floor(Math.random() * 9);
			console.log(index + " : " + random + " : " + data);
			for (var i = 0; i < random; i++) {
				$(data).trigger("click");
			}
		});
	});
</script>
</html>
